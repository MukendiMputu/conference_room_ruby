<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Conference Room | Home </title>
  </head>
  <body>
    <!-- [ HEADER ] -->
    <header id="header" aria-label="page banner">
      <div id="page_heading" class="float-left" aria-label="page heading">
        <h1><%= link_to("Conference Room", root_path, :role => 'link') %></h1>
      </div>
      <!--[ LOGIN ]-->
      <div id="login_main" aria-label="login pane">
        <div id="login" >
          <div id="err_mod_main" class="invisible modal-danger">
            <span class="label_required invisible danger"><%= flash[:alert] %></span>
          </div>
          <%= form_with(:model => @user, :url => signin_users_path, :method => 'post', :class => 'form-validate') do |form| %>
            <%= form.label(:email)%>
            <%= form.email_field(:email, placeholder: "e.g. name@address.com", :class => 'form-control')%>
            <%= form.label(:password)%>
            <%= form.password_field(:password, placeholder: "Enter your password", :class => 'form-control')%>
            <%= form.submit('Sign in', :class => 'btn-primary medium btn-submit') %>
            <span id="para_account" >
              or <%= link_to("Sign up", signup_users_path, :class => 'btn-primary') %>
            </span>
          <% end %>
        </div>
      </div>
      <!--[ BANNER ]-->
      <!--[ Carousel ]-->
      <div id="banner" class="carousel slide" data-ride="carousel" role="img" aria-label="banner picture">
        <ol class="carousel-indicators">
          <% @rooms.each do |room| %>
          <li data-target="#carouselExampleCaptions" data-slide-to="<%= room.id %>" class="<%= room.id == 1 ? 'active' : '' %>"></li>
          <% end %>
        </ol>
        <div class="carousel-inner">
          <% @rooms.each do |room| %>
          <div class="carousel-item <%= room.id == 1 ? ' active' : '' %>">
             <%= image_tag("landscapes/480/#{room.picture}", :class =>"d-block w-100", :height => '480', :style => 'width:100%', :alt => "Banner picture of #{room.name}") %>
            <div class="carousel-caption d-none d-md-block">
              <h5><%= room.name %></h5>
              <p><%= truncate(room.avantgarde, :length => 76, :separator => ' ')%></p>
            </div>
          </div>
          <% end %>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </a>
      </div>
    </header>
    <nav class="crumbs" aria-label="navigation menu">
      <ul aria-label="navigation options">
        <li><%= link_to("Home", "#") %></li>
        <li><%= link_to("Services", "#") %></li>
        <li><%= link_to("About", "#") %></li>
        <li><%= link_to("Contact", "#") %></li>
      </ul>
    </nav>
    <hr />
    <!--[ PAGE CONTAINER ]-->
    <main id="grid" aria-label="page container">
      <% @page_title = 'Home' %>
      <!--[ MAIN CONTENT ]-->
      <article id="section" aria-label="main content">
        <section id="main_pane">
          <div id="mp_titel" class="text-center">
            <h1>Our Rooms</h1>
          </div>

          <div id="swiper">
	          <div id="room_panorama" class="search">
              <% @rooms.each do |room| %>
              <div class="card room">
                <picture id="room_thumbnail" role="img" aria-label="room thumbnail">
                  <source media="(min-width:600px)" srcset="<%= asset_path("480/#{room.picture}", type: :image) %>">
                          <img alt="conference room number <%= room.number %>" class="img-small" src="<%= asset_path("480/#{room.picture}", type: :image) %>"/>
                </picture>
                <p class="room_description"> <%= truncate(room.avantgarde, :length => 150, :separator => ' ') %></p>
                <p class="room_details">
                  <h4><%= room.building %></h4>
                  <span>Configuration:  <%= room.configuration %></span><br/>
                  <span>Capacity:  <%= room.capacity %></span>
                </p>
                <p><span  class=""><%= link_to('View more', '#') %></span><br /></p>
              </div>
              <% end %>
            </div>
          </div>
        </section>
        <section class="search">
          <h1>Availabilities</h1>
          <div id="date_picker" class="text-center">
            <%= time_tag(Date.today, :id => 'dp_date') %>
          </div>
          <%= form_with(:url => {:action => :search_booking}, :method => "post") do %>
          <div class="search_flex">
            <%= label_tag(:number, 'Room:', :class => 'search_label') %>
            <%= select_tag(:number, options_for_select(@rooms.map{|r| [r.number, r.id]}), {:include_blank => true}) %>
          </div>
          <div class="search_flex">
            <%= label_tag(:date, 'Date:', :class => 'search_label') %>
            <%= date_field_tag(:date, Date.today, :min => Time.now.year-1, :max => Time.now.year+5, :class => "form-date")%>
          </div>
          <div class="search_flex">
            <%= label_tag(:start_time, 'from ', :class => 'search_label') %>
            <%= time_field_tag(:start_time, Time.now.strftime("%H:%M"), :step => 1800, :min => "06:00", :max => "22:00", :class => "form-date") %>
          </div>
          <div class="search_flex">
            <%= label_tag(:end_time, 'to ', :class => 'search_label') %>
            <%= time_field_tag(:end_time, (Time.now.advance(hours: 6)).strftime("%H:%M"), :step => 1800, :min => "06:00", :max => "22:00", :class => "form-date") %>
          </div>
          <div>
            <%= submit_tag(raw("&#x1F50D;"), :class => 'circled-button') %>
          </div>
          <% end %>
          <br />
          <div>
	          <div id="room_panorama" class="">
              <% @bookings.each do |booking| %>
              <div class="card room">
                <picture id="" role="img" aria-label="room thumbnail">
                  <source media="(min-width:600px)" srcset="<%= asset_path("480/#{booking.room.picture}", type: :image) %>">
                          <img alt="conference room number <%= booking.room.number %>" class="img-small" src="<%= asset_path("480/#{booking.room.picture}", type: :image) %>"/>
                </picture>
                <p class="room_details">
                  <h4><%= booking.agenda %></h4>
                  <span>Date:  <%= booking.date.to_formatted_s(:long_ordinal) %></span><br/>
                  <span>Time:  <%= booking.start_time.to_formatted_s(:time) %> - <%= booking.end_time.to_formatted_s(:time)%></span>
                </p>
                <p><span  class=""><%= link_to('View more', '#') %></span><br /></p>
              </div>
              <% end %>
            </div>
          </div>
        </section>
      </article>

      <!--[ ASIDE ]-->
      <aside id="aside" aria-label="events pane">

      </aside>
    </main>
    <hr />
    <!--[ FOOTER ]-->
    <footer id="footer" aria-label="page footer">
      <div id="f_wrapper" >
        <div id="f_map" class="f_box" aria-label="company location">
          <h2>Location</h2><br/>
          <div id="googleMap"></div>
        </div>
        <div id="f_cont" class="f_box" aria-label="company conta">
          <h2>Contact</h2>
          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
            sed diam nonumy eirmod tempor invidunt ut labore et dolore
            magna aliquyam erat, sed diam voluptua.</p>
        </div>
        <div id="f_impr" class="f_box" aria-label="company location">
          <h2>Impresum</h2>
          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
            sed diam nonumy eirmod tempor invidunt ut labore et dolore
            magna aliquyam erat, sed diam voluptua.</p>
        </div>
      </div>
    </footer>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2oNtRhnfGNgG_yQUNmBNa1kXJnNkzzp4&callback=myMap"></script>
  </body>
</html>